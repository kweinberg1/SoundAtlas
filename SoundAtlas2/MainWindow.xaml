<Window x:Class="SoundAtlas2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:SoundAtlas2"
    xmlns:soundatlas="clr-namespace:SoundAtlas2"
    xmlns:NetworkUI="clr-namespace:NetworkUI;assembly=NetworkUI"
    xmlns:NetworkModel="clr-namespace:SoundAtlas2.Model;assembly=SoundAtlas2.Model"
    xmlns:ac="clr-namespace:AdornedControl;assembly=AdornedControl"
    xmlns:diagnostics="clr-namespace:System.Diagnostics;assembly=WindowsBase"
    Title="Main Window" 
    x:Name="mainWindow"
    MinWidth="400"
    MinHeight="150"
	Width="800"
    Height="500"
	Loaded="MainWindow_Loaded"
    FocusManager.FocusedElement="{Binding ElementName=networkControl}"
    >
   
    <!-- 
    Including this in binding statements for diagnostics:
    diagnostics:PresentationTraceSources.TraceLevel=High
    -->

    <Window.DataContext>
        <local:MainWindowViewModel />
    </Window.DataContext>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="32"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.Resources>
            <BitmapImage x:Key="UnselectedIcon" UriSource="Images/unselected.png"/>
        </Grid.Resources>

        <soundatlas:SearchControl 
            x:Name="SearchControl" PlacementTarget="{Binding ElementName=SearchButton}" Closed="OnSearchControlClosed">
        </soundatlas:SearchControl>
        <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal">
            <TextBox x:Name="SearchTextBox" VerticalAlignment="Center" Width="150" Text="Enter search here." KeyDown="OnSearchPanelKeyDown"></TextBox>
            <Button x:Name="SearchButton" ToolTip="Add Artist to Atlas" Width="32" Height="32" HorizontalAlignment="Left" Click="OnAddArtistExecuted">
                <Image Stretch="Fill" Source="{StaticResource UnselectedIcon}"/>
            </Button>
        </StackPanel>
        
        <soundatlas:PlaylistControl Grid.Row="1" Grid.Column="0" x:Name="PlaylistView" CreatePlaylist="OnCreatePlaylist" SelectionChanged="OnPlaylistSelectionChanged"/>
        <soundatlas:Atlas Grid.Row="1" Grid.Column="1" x:Name="AtlasView" AddPopularTracks="OnAddPopularTracksClick">
            <soundatlas:Atlas.DataContext>
                <local:AtlasViewModel />
            </soundatlas:Atlas.DataContext>
        </soundatlas:Atlas>
    </Grid>
</Window>
